# =============================================================================
# Backend Environment Variables
# =============================================================================
# Copy this file to .env in the backend/ directory
# Fill in your actual values for local development
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# PORT: Server port (default: 5000)
# NODE_ENV: Environment mode (development, production, test)
# -----------------------------------------------------------------------------
PORT=5000
NODE_ENV=development

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# MONGODB_URI: MongoDB connection string
#   Local: mongodb://localhost:27017/cricket-feedback
#   Atlas: mongodb+srv://username:password@cluster.mongodb.net/cricket-feedback?retryWrites=true&w=majority
#   Docker: mongodb://mongodb:27017/cricket-feedback
# -----------------------------------------------------------------------------
MONGODB_URI=mongodb://localhost:27017/cricket-feedback

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
# JWT_SECRET: Secret key for JWT token signing (REQUIRED in production)
#   Generate with: openssl rand -base64 32
#   Must be a strong random string - never use default in production!
# GOOGLE_CLIENT_ID: OAuth 2.0 client ID from Google Cloud Console
# GOOGLE_CLIENT_SECRET: OAuth 2.0 client secret from Google Cloud Console
#   Get from: https://console.cloud.google.com/apis/credentials
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-in-production
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# -----------------------------------------------------------------------------
# Admin Configuration
# -----------------------------------------------------------------------------
# ADMIN_PASSWORD: Legacy admin password (deprecated, use Google OAuth)
# SUPER_ADMIN_KEY: Key for initial admin setup
# -----------------------------------------------------------------------------
ADMIN_PASSWORD=your_admin_password_here
SUPER_ADMIN_KEY=super-admin-setup-key-2024

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------
# DISABLE_AUTH: Bypass authentication for local development (true/false)
#   WARNING: NEVER enable this in production!
#   When enabled, creates a mock user with role from MOCK_USER_ROLE
# MOCK_USER_ROLE: Role for mock user when DISABLE_AUTH=true (viewer/editor/admin)
# -----------------------------------------------------------------------------
DISABLE_AUTH=false
MOCK_USER_ROLE=admin

# -----------------------------------------------------------------------------
# WhatsApp Cloud API Configuration (Optional)
# -----------------------------------------------------------------------------
# Required for WhatsApp integration features
# Get from: https://developers.facebook.com/apps/
# -----------------------------------------------------------------------------
# WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
# WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
# WHATSAPP_VERIFY_TOKEN=your-verify-token
# WHATSAPP_API_VERSION=v21.0

# -----------------------------------------------------------------------------
# AI Service Configuration (Optional)
# -----------------------------------------------------------------------------
# AI_SERVICE_URL: URL of the AI service (if running separately)
#   Default: http://localhost:8000 (if running locally)
#   Production: https://ai-service.your-domain.com
# -----------------------------------------------------------------------------
# AI_SERVICE_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Feature Flags (Optional)
# -----------------------------------------------------------------------------
# Control gradual rollout of new features.
# 
# Each feature has three possible configurations:
#   1. FF_<NAME>=true        → Enable for ALL users
#   2. FF_<NAME>=false       → Disable globally (check allowlists)
#   3. FF_<NAME>_USERS=a,b   → Enable for specific user emails
#   4. FF_<NAME>_ORGS=x,y    → Enable for specific organization IDs
#
# Priority: Global ON > User allowlist > Org allowlist > OFF
#
# ROLLOUT STRATEGY:
#   Phase 1: Set FF_*_USERS=your-email@domain.com (internal testing)
#   Phase 2: Add beta testers to FF_*_USERS list
#   Phase 3: Add specific orgs to FF_*_ORGS list
#   Phase 4: Set FF_*=true for global rollout
# -----------------------------------------------------------------------------

# Multi-Tenant System (master flag)
# Enables: Organization creation, team switching, member management
FF_MULTI_TENANT=false
FF_MULTI_TENANT_USERS=
FF_MULTI_TENANT_ORGS=

# Team Discovery
# Enables: Team search, CricHeroes ID lookup, join requests
FF_TEAM_DISCOVERY=false
FF_TEAM_DISCOVERY_USERS=

# WhatsApp BYOT (Bring Your Own Token)
# Enables: Custom WhatsApp Business number configuration per team
FF_WHATSAPP_BYOT=false
FF_WHATSAPP_BYOT_ORGS=

# -----------------------------------------------------------------------------
# Production MongoDB Atlas Example
# -----------------------------------------------------------------------------
# Uncomment and update for production:
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/cricket-feedback?retryWrites=true&w=majority

# =============================================================================
# FEATURE FLAGS - Gradual Rollout Configuration
# =============================================================================
# Control which features are enabled. Set to 'true' to enable globally,
# or use allowlists for gradual rollout to specific users/organizations.
#
# USAGE:
# - FF_<FLAG>=true        → Enable for ALL users
# - FF_<FLAG>=false       → Disable globally (check allowlists)
# - FF_<FLAG>_USERS=      → Comma-separated emails for beta testers
# - FF_<FLAG>_ORGS=       → Comma-separated org IDs for beta teams
# =============================================================================

# -----------------------------------------------------------------------------
# Multi-Tenant System (Master Flag)
# -----------------------------------------------------------------------------
# Controls the entire multi-tenant feature set. When disabled, the app
# operates in single-tenant mode (original behavior).
# -----------------------------------------------------------------------------
FF_MULTI_TENANT=false
FF_MULTI_TENANT_USERS=
FF_MULTI_TENANT_ORGS=

# -----------------------------------------------------------------------------
# Team Discovery & Join Requests
# -----------------------------------------------------------------------------
# Enables team search, CricHeroes ID lookup, and join request workflow.
# Users can find existing teams and request to join instead of creating new ones.
# Protected routes: /api/organizations/search, /api/organizations/lookup/*,
#                   /api/organizations/*/join-request, /api/organizations/join-requests
# -----------------------------------------------------------------------------
FF_TEAM_DISCOVERY=false
FF_TEAM_DISCOVERY_USERS=

# -----------------------------------------------------------------------------
# WhatsApp BYOT (Bring Your Own Token)
# -----------------------------------------------------------------------------
# Allows teams to configure their own WhatsApp Business number instead of
# using the platform's shared number. Requires Meta Business verification.
# -----------------------------------------------------------------------------
FF_WHATSAPP_BYOT=false
FF_WHATSAPP_BYOT_ORGS=

# =============================================================================
# ROLLOUT EXAMPLES
# =============================================================================
# 
# Example 1: Enable team discovery for yourself only (testing)
# FF_TEAM_DISCOVERY=false
# FF_TEAM_DISCOVERY_USERS=your-email@gmail.com
#
# Example 2: Enable for beta testers
# FF_TEAM_DISCOVERY=false
# FF_TEAM_DISCOVERY_USERS=beta1@example.com,beta2@example.com
#
# Example 3: Enable for specific organizations
# FF_WHATSAPP_BYOT=false
# FF_WHATSAPP_BYOT_ORGS=64abc123def456789012,64def456abc789012345
#
# Example 4: Enable for everyone (production rollout)
# FF_TEAM_DISCOVERY=true
# =============================================================================
