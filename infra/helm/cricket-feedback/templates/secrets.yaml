{{- if .Values.secrets.enabled }}
{{- $existingSecret := lookup "v1" "Secret" .Values.namespace.name "cricket-secrets" }}
{{- if not $existingSecret }}
# Cricket Secrets
apiVersion: v1
kind: Secret
metadata:
  name: cricket-secrets
  namespace: {{ .Values.namespace.name | default "default" }}
  labels:
    app: {{ include "cricket-feedback.name" . }}
    chart: {{ include "cricket-feedback.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
type: Opaque
stringData:
  jwt-secret: {{ .Values.secrets.jwtSecret | quote }}
  google-client-id: {{ .Values.secrets.googleClientId | quote }}
  google-client-secret: {{ .Values.secrets.googleClientSecret | quote }}
  super-admin-key: {{ .Values.secrets.superAdminKey | quote }}
{{- end }}
---
{{- $existingWhatsAppSecret := lookup "v1" "Secret" .Values.namespace.name "whatsapp-credentials" }}
{{- if not $existingWhatsAppSecret }}
# WhatsApp Credentials Secret
apiVersion: v1
kind: Secret
metadata:
  name: whatsapp-credentials
  namespace: {{ .Values.namespace.name | default "default" }}
  labels:
    app: {{ include "cricket-feedback.name" . }}
    chart: {{ include "cricket-feedback.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
type: Opaque
stringData:
  WHATSAPP_ACCESS_TOKEN: {{ .Values.secrets.whatsappAccessToken | quote }}
{{- end }}
{{- end }}
